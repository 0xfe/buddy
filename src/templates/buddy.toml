# Buddy configuration
# See README for all options. Environment variables override these values:
#   BUDDY_API_KEY, BUDDY_BASE_URL, BUDDY_MODEL
# Legacy AGENT_* variables are still accepted for compatibility.
#
# Profiles live under [models.<name>] (alias: [model.<name>]).
# Profile fields:
# - api: "completions" | "responses"
# - auth: "api-key" | "login"
# - only one of api_key, api_key_env, api_key_file may be set.

[models.gpt-codex]
api_base_url = "https://api.openai.com/v1"
api = "responses"
auth = "login"
model = "gpt-5.3-codex"
# If you prefer API-key auth for OpenAI, switch auth = "api-key" and set one:
# api_key_env = "OPENAI_API_KEY"
# api_key = "sk-..."
# api_key_file = "/path/to/key.txt"

[models.gpt-spark]
api_base_url = "https://api.openai.com/v1"
api = "responses"
auth = "login"
model = "gpt-5.3-codex-spark"

[models.openrouter-deepseek]
api_base_url = "https://openrouter.ai/api/v1"
api = "completions"
auth = "api-key"
api_key_env = "OPENROUTER_API_KEY"
model = "deepseek/deepseek-v3.2"

[models.openrouter-glm]
api_base_url = "https://openrouter.ai/api/v1"
api = "completions"
auth = "api-key"
api_key_env = "OPENROUTER_API_KEY"
model = "z-ai/glm-5"

[models.kimi]
api_base_url = "https://api.moonshot.ai/v1"
api = "completions"
auth = "api-key"
api_key_env = "MOONSHOT_API_KEY"
model = "kimi-k2.5"

[agent]
model = "gpt-codex"                           # active profile key from [models.<name>]
# system_prompt = "Optional override. If unset, uses the built-in prompt template."
max_iterations = 20
# temperature = 0.7
# top_p = 1.0

[tools]
shell_enabled = true
fetch_enabled = true
fetch_confirm = false                         # optional confirmation before fetch_url
fetch_allowed_domains = []                    # optional allowlist (empty = no allowlist)
fetch_blocked_domains = ["localhost"]         # optional denylist (exact + subdomain match)
files_enabled = true
files_allowed_paths = []                      # optional write_file allowlist roots
search_enabled = true
shell_confirm = true                          # ask before running shell commands
shell_denylist = [                            # block dangerous run_shell commands
  "rm -rf /",
  "mkfs",
  "shutdown",
  "reboot",
  "dd if=",
]

[network]
api_timeout_secs = 120
fetch_timeout_secs = 20

[display]
color = true
show_tokens = false
show_tool_calls = true
persist_history = true                     # save REPL input history to ~/.config/buddy/history
